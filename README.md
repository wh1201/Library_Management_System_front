# å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Next.js å’Œ Supabase æ„å»ºçš„ç°ä»£åŒ–å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„èº«ä»½éªŒè¯å’Œå›¾ä¹¦ç®¡ç†åŠŸèƒ½ã€‚

## ä¸»è¦åŠŸèƒ½

- ğŸ” **ç”¨æˆ·èº«ä»½éªŒè¯** - åŸºäº Supabase Auth çš„å®‰å…¨ç™»å½•/æ³¨å†Œç³»ç»Ÿ
- ğŸ“š **å›¾ä¹¦ç®¡ç†** - æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤å’Œæœç´¢å›¾ä¹¦
- ğŸ“– **å€Ÿé˜…ç®¡ç†** - ç®¡ç†å›¾ä¹¦å€Ÿé˜…å’Œå½’è¿˜æµç¨‹
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** - å®Œå–„çš„ç”¨æˆ·æƒé™ç³»ç»Ÿ
- ğŸ“± **å“åº”å¼è®¾è®¡** - æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡è®¿é—®

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Next.js 14 (App Router)
- **èº«ä»½éªŒè¯**: Supabase Auth
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **æ ·å¼**: Tailwind CSS + shadcn/ui
- **è¡¨å•ç®¡ç†**: React Hook Form + Zod
- **çŠ¶æ€ç®¡ç†**: TanStack Query
- **é€šçŸ¥ç³»ç»Ÿ**: Sonner

## èº«ä»½éªŒè¯ç³»ç»Ÿ

æœ¬ç³»ç»Ÿå·²ä»è‡ªå®šä¹‰èº«ä»½éªŒè¯è¿ç§»åˆ° Supabase Authï¼Œæä¾›ä»¥ä¸‹ä¼˜åŠ¿ï¼š

### ä¸»è¦ç‰¹æ€§
- âœ… é‚®ç®±/å¯†ç ç™»å½•
- âœ… å®‰å…¨çš„ä¼šè¯ç®¡ç†
- âœ… è‡ªåŠ¨ token åˆ·æ–°
- âœ… é‚®ç®±éªŒè¯æ”¯æŒ
- âœ… å¯†ç é‡ç½®åŠŸèƒ½
- âœ… è·¯ç”±ä¿æŠ¤ä¸­é—´ä»¶

### ç™»å½•æµç¨‹
1. ç”¨æˆ·åœ¨ `/user/login` é¡µé¢è¾“å…¥é‚®ç®±å’Œå¯†ç 
2. ç³»ç»Ÿè°ƒç”¨ `supabase.auth.signInWithPassword()` è¿›è¡ŒéªŒè¯
3. ç™»å½•æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ° `/dashboard`
4. ä¸­é—´ä»¶è‡ªåŠ¨ä¿æŠ¤å—ä¿æŠ¤çš„è·¯ç”±

### æ³¨å†Œæµç¨‹
1. ç”¨æˆ·åœ¨ `/user/register` é¡µé¢è¾“å…¥é‚®ç®±å’Œå¯†ç 
2. ç³»ç»Ÿè°ƒç”¨ `supabase.auth.signUp()` åˆ›å»ºè´¦æˆ·
3. æ ¹æ®é…ç½®ï¼Œç”¨æˆ·éœ€è¦éªŒè¯é‚®ç®±æˆ–å¯ç›´æ¥ç™»å½•

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (protected)/          # å—ä¿æŠ¤çš„è·¯ç”±
â”‚   â”‚   â””â”€â”€ dashboard/        # ä»ªè¡¨æ¿é¡µé¢
â”‚   â”œâ”€â”€ api/                  # API è·¯ç”±ï¼ˆæ—§çš„è‡ªå®šä¹‰éªŒè¯ï¼Œå·²åºŸå¼ƒï¼‰
â”‚   â”œâ”€â”€ user/                 # ç”¨æˆ·ç›¸å…³é¡µé¢
â”‚   â”‚   â”œâ”€â”€ login/           # ç™»å½•é¡µé¢
â”‚   â”‚   â””â”€â”€ register/        # æ³¨å†Œé¡µé¢
â”‚   â”œâ”€â”€ layout.tsx           # å…¨å±€å¸ƒå±€
â”‚   â””â”€â”€ page.tsx             # ä¸»é¡µ
â”œâ”€â”€ components/
â”‚   â””â”€â”€ ui/                  # UI ç»„ä»¶åº“
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ supabase/            # Supabase é…ç½®
â”‚       â”œâ”€â”€ client.ts        # å®¢æˆ·ç«¯é…ç½®
â”‚       â”œâ”€â”€ server.ts        # æœåŠ¡ç«¯é…ç½®
â”‚       â””â”€â”€ middleware.ts    # ä¸­é—´ä»¶é…ç½®
â””â”€â”€ middleware.ts            # è·¯ç”±ä¿æŠ¤ä¸­é—´ä»¶
```

## å¼€å§‹ä½¿ç”¨

### ç¯å¢ƒé…ç½®

1. å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼š
```bash
cp .env.example .env.local
```

2. é…ç½® Supabase ç¯å¢ƒå˜é‡ï¼š
```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### å®‰è£…ä¾èµ–

```bash
npm install
# æˆ–
yarn install
# æˆ–
pnpm install
```

### è¿è¡Œå¼€å‘æœåŠ¡å™¨

```bash
npm run dev
# æˆ–
yarn dev
# æˆ–
pnpm dev
```

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹ç»“æœã€‚

## éƒ¨ç½²è¯´æ˜

### Supabase é…ç½®

1. åœ¨ Supabase é¡¹ç›®ä¸­å¯ç”¨èº«ä»½éªŒè¯
2. é…ç½®é‚®ç®±éªŒè¯ï¼ˆå¯é€‰ï¼‰
3. è®¾ç½®é€‚å½“çš„ RLS ç­–ç•¥
4. æ›´æ–°ç¯å¢ƒå˜é‡

### è·¯ç”±ä¿æŠ¤

ä¸­é—´ä»¶ (`middleware.ts`) è‡ªåŠ¨ä¿æŠ¤ä»¥ä¸‹è·¯ç”±ï¼š
- `/dashboard` - éœ€è¦ç™»å½•è®¿é—®
- å…¬å¼€è·¯ç”±ï¼š`/`, `/user/login`, `/user/register`

## è¿ç§»è¯´æ˜

æœ¬é¡¹ç›®å·²ä»è‡ªå®šä¹‰èº«ä»½éªŒè¯ç³»ç»Ÿè¿ç§»åˆ° Supabase Authï¼š

### å·²ç§»é™¤çš„æ–‡ä»¶/åŠŸèƒ½
- è‡ªå®šä¹‰ JWT token ç”Ÿæˆ
- `/api/user/login` å’Œ `/api/user/register` è·¯ç”±
- è‡ªå®šä¹‰ç”¨æˆ·è¡¨éªŒè¯
- Cookie æ‰‹åŠ¨ç®¡ç†

### æ–°å¢çš„åŠŸèƒ½
- Supabase Auth é›†æˆ
- è‡ªåŠ¨ä¼šè¯ç®¡ç†
- é‚®ç®±éªŒè¯æ”¯æŒ
- æ›´å®‰å…¨çš„èº«ä»½éªŒè¯æµç¨‹

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›æœ¬é¡¹ç›®ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚
